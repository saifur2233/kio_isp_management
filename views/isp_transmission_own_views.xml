<?xml version="1.0" encoding="utf-8" ?>
<odoo>
        <!-- Tree View -->
    <record id="view_isp_transmission_own_tree" model="ir.ui.view">
        <field name="name">isp.transmission.own.tree</field>
        <field name="model">isp.transmission.own</field>
        <field name="arch" type="xml">
            <tree string="own Transmission">
                <field name="seq_id" decoration-bf="1"/>
                <field name="marketing_id" string="Marketing Ref"/>
                <field name="district"/>
                <field name="upazila"/>
                <field name="area"/>
                <field name="total_capacity"/>
                <field name="latitude"/>
                <field name="longitude"/>
                <field name="own_remarks"/>
                <field name="state" widget="badge"/>
            </tree>
        </field>
    </record>

    <!-- Form View -->
    <record id="view_isp_transmission_own_form" model="ir.ui.view">
        <field name="name">isp.transmission.own.form</field>
        <field name="model">isp.transmission.own</field>
        <field name="arch" type="xml">
            <form string="own Transmission">
                <header>

                    <button name="action_own_confirm"
                            string="Confirm"
                            type="object"
                            class="oe_highlight"
                            invisible="state != 'draft'"/>

                    <button name="action_own_noc_confirm"
                            string="NOC Confirm"
                            type="object"
                            class="oe_highlight"
                            groups="kio_isp_management.group_isp_noc_access"
                            invisible="state != 'confirm'"/>

                    <button name="action_own_done"
                            string="Done"
                            type="object"
                            class="btn btn-success"
                            groups="kio_isp_management.group_isp_noc_access"
                            invisible="state != 'noc_confirm'"/>

                    <field name="state" widget="statusbar"/>
                </header>
                <sheet>
                    <group>
                        <group string="Basic Information">
                            <field name="marketing_id"
                                   string="Marketing Ref"
                                   readonly="1"
                                   options="{'no_create': True, 'no_open': False}"/>
                            <field name="seq_id" readonly="1"/>
                            <label for="total_capacity"/>
                            <div class="d-flex align-items-center gap-2" name="div_total_capacity">
                                <field name="total_capacity"
                                       readonly="1"
                                       class="o_hr_narrow_field"/>
                                <span class="text-muted fw-semibold">MB</span>
                            </div>
                            <field name="device_id"/>
                            <field name="device_details"/>
                            <field name="is_lacp"/>
                        </group>

                        <group string="Location">
                            <field name="district" readonly="1"/>
                            <field name="upazila" readonly="1"/>
                            <field name="area" readonly="1"/>
                            <field name="latitude" readonly="1"/>
                            <field name="longitude" readonly="1"/>
                            <field name="port_number" widget="many2many_tags"/>
                            <field name="aggregation_point_id"/>
                            <field name="aggregation_switch_model_no" readonly="1"/>
                            <field name="aggregation_pop_latitude" readonly="1"/>
                            <field name="aggregation_pop_longitude" readonly="1"/>
                        </group>
                    </group>

                    <separator string="Capacity Details"/>
                    <div class="o_row">
                        <div class="o_col-6">
                            <div name="capacity_lines_group" class="kio_capacity_layout_fix">
                                <field name="capacity_line_ids" nolabel="1" class="kio_capacity_one2many">
                                    <tree editable="bottom" create="1" edit="1" delete="1" class="o_tree_view o_tree_view_compact kio_capacity_tree">
                                        <field name="type_id"/>
                                        <field name="capacity" string="Capacity" class="isp_capacity_col"/>
                                    </tree>
                                </field>
                                <div class="kio_capacity_totals_grid">
                                    <div class="kio_capacity_total_cell kio_capacity_add_line_cell">
                                        <button name="action_add_capacity_line" type="object" string="Add a line" class="btn btn-link p-0 kio_capacity_add_line_btn"/>
                                    </div>
                                    <div class="kio_capacity_total_cell kio_capacity_data_cell">
                                        <span class="o_td_label o_form_label mb-0">Data Capacity:</span>
                                        <field name="total_capacity" nolabel="1" readonly="1" class="oe_inline fw-bold text-end"/>
                                        <span class="text-muted fw-semibold">MB</span>
                                    </div>
                                    <div class="kio_capacity_total_cell"/>
                                    <div class="kio_capacity_total_cell"/>
                                    <div class="kio_capacity_total_cell kio_capacity_total_cell_end"/>
                                </div>
                            </div>
                        </div>
                        <div class="o_col-6"/>
                    </div>

                    <group string="Marketing Remarks">
                        <field name="remarks" readonly="1" placeholder="Marketing remarks..."/>
                    </group>

                    <group string="own Remarks">
                        <field name="own_remarks" placeholder="Enter own remarks..."/>
                    </group>

                    <notebook>

                        <!-- ===================== -->
                        <!-- TAB 1: SURVEY REPORTS -->
                        <!-- ===================== -->
                        <page string="Survey Reports">
                            <group string="own Survey Reports">
                                <group>
                                    <field name="survey_report" placeholder="Enter survey report..."/>
                                    <field name="survey_report_for_primary" placeholder="Enter primary survey report..."/>
                                    <field name="survey_report_for_secondary" placeholder="Enter secondary survey report..."/>
                                </group>

                                <group>
                                    <field name="survey_report_file" filename="survey_report_filename"/>
                                    <field name="survey_report_filename" invisible="1"/>

                                    <field name="survey_report_for_primary_file" filename="survey_report_for_primary_filename"/>
                                    <field name="survey_report_for_primary_filename" invisible="1"/>

                                    <field name="survey_report_for_secondary_file" filename="survey_report_for_secondary_filename"/>
                                    <field name="survey_report_for_secondary_filename" invisible="1"/>
                                </group>
                            </group>
                        </page>

                        <!-- ======================= -->
                        <!-- TAB 2: RESURVEY REPORTS -->
                        <!-- ======================= -->
                        <page string="Resurvey Reports">
                            <group string="own Resurvey Reports">
                                <group>
                                    <field name="resurvey_report" placeholder="Enter resurvey report..."/>
                                    <field name="resurvey_report_for_primary" placeholder="Enter primary resurvey report..."/>
                                    <field name="resurvey_report_for_secondary" placeholder="Enter secondary resurvey report..."/>
                                </group>

                                <group>
                                    <field name="resurvey_report_file" filename="resurvey_report_filename"/>
                                    <field name="resurvey_report_filename" invisible="1"/>

                                    <field name="resurvey_report_for_primary_file" filename="resurvey_report_for_primary_filename"/>
                                    <field name="resurvey_report_for_primary_filename" invisible="1"/>

                                    <field name="resurvey_report_for_secondary_file" filename="resurvey_report_for_secondary_filename"/>
                                    <field name="resurvey_report_for_secondary_filename" invisible="1"/>
                                </group>
                            </group>
                        </page>

                    </notebook>

                </sheet>
            </form>
        </field>
    </record>

    <record id="action_transmission_own" model="ir.actions.act_window">
        <field name="name">OWN Transmission</field>
        <field name="res_model">isp.transmission.own</field>
        <field name="view_mode">tree,form</field>
    </record>


    <menuitem id="menu_transmission_own"
              name="OWN Transmission"
              parent="menu_transmission_root"
              action="action_transmission_own"/>

</odoo>
